{"version":3,"sources":["../../../src/utils/editor.ts"],"sourcesContent":["import spawnAsync from '@expo/spawn-async';\nimport editors from 'env-editor';\n\nimport * as Log from '../log';\n\n/** Guess what the default editor is and default to VSCode. */\nexport function guessEditor(): editors.Editor {\n  try {\n    return editors.defaultEditor();\n  } catch {\n    return editors.getEditor('vscode');\n  }\n}\n\n/** Open a file path in a given editor. */\nexport async function openInEditorAsync(path: string): Promise<boolean> {\n  const editor = guessEditor();\n\n  Log.debug(`Opening ${path} in ${editor?.name} (bin: ${editor?.binary}, id: ${editor?.id})`);\n  if (editor) {\n    try {\n      await spawnAsync(editor.binary, [path]);\n      return true;\n    } catch (error: any) {\n      Log.debug(\n        `Failed to auto open path in editor (path: ${path}, binary: ${editor.binary}):`,\n        error\n      );\n    }\n  }\n\n  Log.error(\n    'Could not open editor, you can set it by defining the $EDITOR environment variable with the binary of your editor. (e.g. \"vscode\" or \"atom\")'\n  );\n  return false;\n}\n"],"names":["guessEditor","openInEditorAsync","Log","editors","defaultEditor","getEditor","path","editor","debug","name","binary","id","spawnAsync","error"],"mappings":"AAAA;;;;QAMgBA,WAAW,GAAXA,WAAW;QASLC,iBAAiB,GAAjBA,iBAAiB;AAfhB,IAAA,WAAmB,kCAAnB,mBAAmB,EAAA;AACtB,IAAA,UAAY,kCAAZ,YAAY,EAAA;AAEpBC,IAAAA,GAAG,mCAAM,QAAQ,EAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGR,SAASF,WAAW,GAAmB;IAC5C,IAAI;QACF,OAAOG,UAAO,QAAA,CAACC,aAAa,EAAE,CAAC;KAChC,CAAC,OAAM;QACN,OAAOD,UAAO,QAAA,CAACE,SAAS,CAAC,QAAQ,CAAC,CAAC;KACpC;CACF;AAGM,eAAeJ,iBAAiB,CAACK,IAAY,EAAoB;IACtE,MAAMC,MAAM,GAAGP,WAAW,EAAE,AAAC;IAE7BE,GAAG,CAACM,KAAK,CAAC,CAAC,QAAQ,EAAEF,IAAI,CAAC,IAAI,EAAEC,MAAM,QAAM,GAAZA,KAAAA,CAAY,GAAZA,MAAM,CAAEE,IAAI,CAAC,OAAO,EAAEF,MAAM,QAAQ,GAAdA,KAAAA,CAAc,GAAdA,MAAM,CAAEG,MAAM,CAAC,MAAM,EAAEH,MAAM,QAAI,GAAVA,KAAAA,CAAU,GAAVA,MAAM,CAAEI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5F,IAAIJ,MAAM,EAAE;QACV,IAAI;YACF,MAAMK,CAAAA,GAAAA,WAAU,AAAuB,CAAA,QAAvB,CAACL,MAAM,CAACG,MAAM,EAAE;gBAACJ,IAAI;aAAC,CAAC,CAAC;YACxC,OAAO,IAAI,CAAC;SACb,CAAC,OAAOO,KAAK,EAAO;YACnBX,GAAG,CAACM,KAAK,CACP,CAAC,0CAA0C,EAAEF,IAAI,CAAC,UAAU,EAAEC,MAAM,CAACG,MAAM,CAAC,EAAE,CAAC,EAC/EG,KAAK,CACN,CAAC;SACH;KACF;IAEDX,GAAG,CAACW,KAAK,CACP,8IAA8I,CAC/I,CAAC;IACF,OAAO,KAAK,CAAC;CACd"}